
{% extends "base.html" %}
{% block content %}
<h2>Produtos</h2>

<h5 class="mt-3">Cadastrar novo produto</h5>
<form method="POST" action="/add_produto" class="row g-2 mb-4">
  <div class="col-md-2">
    <input class="form-control" name="sku" placeholder="SKU" required>
  </div>
  <div class="col-md-4">
    <input class="form-control" name="titulo" placeholder="Título do produto" required>
  </div>
  <div class="col-md-2">
    <input class="form-control" name="estoque" placeholder="Estoque inicial" value="0">
  </div>
  <div class="col-md-2">
    <input class="form-control" name="custo_unitario" placeholder="Custo unitário (R$)" value="0,00">
  </div>
  <div class="col-md-2">
    <button class="btn btn-primary w-100">Adicionar</button>
  </div>
</form>

<h5>Lista de produtos</h5>
<table class="table table-bordered bg-white align-middle">
  <tr>
    <th>ID</th>
    <th>SKU</th>
    <th>Título</th>
    <th>Estoque</th>
    <th>Custo unitário</th>
    <th style="width: 200px;">Ações</th>
  </tr>
  {% for p in produtos %}
  <tr>
    <td>{{ p[0] }}</td>
    <td>{{ p[1] }}</td>
    <td>{{ p[2] }}</td>
    <td>{{ p[3] }}</td>
    <td>R$ {{ '%.2f'|format(p[4] or 0) }}</td>
    <td>
      <a href="/produto/{{ p[0] }}/editar" class="btn btn-sm btn-outline-primary">Editar</a>
      <form action="/produto/{{ p[0] }}/deletar" method="POST" style="display:inline;"
            onsubmit="return confirm('Tem certeza que deseja excluir este produto?');">
        <button class="btn btn-sm btn-outline-danger">Excluir</button>
      </form>
    </td>
  </tr>
  {% endfor %}
</table>
{% endblock %}
